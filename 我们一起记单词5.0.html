<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ—¥è¯­æ ¸å¿ƒè¯æ±‡ </title>
    <style>
        :root {
            /* è«å…°è¿ªé…è‰² */
            --bg-color: #F0F2F5;
            --card-bg: #FFFFFF;
            --text-main: #5C5C5C;
            --text-sub: #999999;
            
            /* çŠ¶æ€è‰² */
            --color-forget: #E6A0A0;
            --color-blurry: #E6D0A0;
            --color-remember: #A0CFA0;
            
            --accent-blue: #94A7AE;
            --shadow: 0 10px 30px rgba(0,0,0,0.06);
            --btn-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Hiragino Sans", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* é¡¶éƒ¨å¯¼èˆª */
        header {
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
            flex-shrink: 0;
            background-color: var(--bg-color);
            z-index: 10;
        }

        /* æŒ‰é’®ç»„å®¹å™¨ */
        .header-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        /* è¿›åº¦æ¡ */
        .progress-wrapper {
            flex: 1;
            margin: 0 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .progress-text {
            font-size: 0.7rem;
            color: var(--text-sub);
            margin-bottom: 3px;
            text-align: center;
        }
        .progress-track {
            height: 6px;
            background-color: #E0E0E0;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: var(--color-remember);
            width: 0%;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-icon {
            background: white;
            border: none;
            width: 34px;
            height: 34px;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            color: var(--text-main);
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .btn-icon:active { transform: scale(0.9); }

        /* ä¸»ä½“åŒºåŸŸ */
        main {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
            padding: 15px;
            position: relative;
        }

        /* å¡ç‰‡å®¹å™¨ */
        .card-container {
            width: 100%;
            max-width: 360px;
            aspect-ratio: 3/4.6; 
            max-height: 560px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            cursor: pointer;
        }
        .card-container.flipped { transform: rotateY(180deg); }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.5);
        }

        .card-back {
            transform: rotateY(180deg);
            justify-content: flex-start;
            padding-top: 35px;
            background: linear-gradient(to bottom right, #fff, #fafafa);
        }

        /* å†…å®¹æ ·å¼ */
        .tag-theme {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: var(--accent-blue);
            background: rgba(148, 167, 174, 0.15);
            padding: 4px 10px;
            border-radius: 12px;
        }

        .front-kanji {
            font-size: 3.2rem;
            font-weight: 700;
            color: var(--text-main);
            margin: 20px 0;
            font-family: "Hiragino Sans", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
        }
        
        .click-hint {
            position: absolute;
            bottom: 30px;
            font-size: 0.8rem;
            color: var(--text-sub);
            opacity: 0.7;
        }

        /* èƒŒé¢è¯¦æƒ… */
        .back-kana {
            font-size: 2.4rem;
            color: var(--color-forget);
            font-weight: bold;
            font-family: "Hiragino Sans", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
            margin-bottom: 8px;
            margin-top: 5px;
        }
        
        .info-grid {
            width: 100%;
            background: #F8F9FA;
            border-radius: 12px;
            padding: 12px;
            margin: 8px 0;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px dashed #E0E0E0;
            font-size: 0.95rem;
        }
        .info-row:last-child { border-bottom: none; }
        .label { color: var(--text-sub); font-size: 0.85rem; align-self: center; }
        .val { font-weight: 500; text-align: right; }

        /* åŠ©è®°æç¤ºæ¡† */
        .tip-box {
            width: 100%;
            background-color: rgba(160, 207, 160, 0.15);
            border-radius: 12px;
            padding: 12px;
            margin-top: auto;
            margin-bottom: 10px;
            text-align: left;
        }
        .tip-title {
            font-size: 0.75rem;
            color: #6B8E6B;
            font-weight: bold;
            margin-bottom: 4px;
            display: block;
        }
        .tip-content {
            font-size: 0.9rem;
            color: #5C7A5C;
            line-height: 1.4;
        }

        /* åº•éƒ¨æ§åˆ¶æ  */
        .controls {
            padding: 0 20px 30px;
            height: auto;
            min-height: 90px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            position: relative;
            flex-shrink: 0;
        }

        .btn-show {
            width: 100%;
            max-width: 300px;
            padding: 15px;
            background-color: var(--text-main);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.05rem;
            font-weight: bold;
            box-shadow: var(--btn-shadow);
            cursor: pointer;
            transition: transform 0.1s;
        }
        .btn-show:active { transform: scale(0.98); }

        .grade-actions {
            display: none;
            width: 100%;
            max-width: 360px;
            justify-content: space-between;
            gap: 10px;
        }
        
        .btn-grade {
            flex: 1;
            padding: 10px 0;
            border: none;
            border-radius: 16px;
            color: white;
            font-weight: bold;
            font-size: 0.95rem;
            cursor: pointer;
            box-shadow: var(--btn-shadow);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s;
        }
        .btn-grade:active { transform: scale(0.95); }
        .btn-grade span { font-size: 0.75rem; opacity: 0.9; font-weight: normal; margin-top: 2px;}

        .btn-forget { background-color: var(--color-forget); }
        .btn-blurry { background-color: var(--color-blurry); color: #5C4F30; }
        .btn-remember { background-color: var(--color-remember); }

        .finished-state {
            text-align: center;
            display: none;
        }
        .finished-icon { font-size: 4rem; margin-bottom: 20px; display: block;}

        /* åˆ—è¡¨å¼¹çª— */
        .modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.98);
            z-index: 100;
            display: none;
            flex-direction: column;
            animation: fadeIn 0.2s;
        }
        .modal-header { padding: 15px 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;}
        .word-list { flex: 1; overflow-y: auto; padding: 0 20px 40px; -webkit-overflow-scrolling: touch; }
        .list-item { padding: 15px 0; border-bottom: 1px solid #f5f5f5; display: grid; grid-template-columns: 1fr 1fr 1fr; font-size: 0.95rem; }
        .list-kanji { font-weight: bold; font-family: "Hiragino Sans", sans-serif;}
        .list-kana { color: var(--color-forget); font-family: "Hiragino Sans", sans-serif;}
        .list-mean { text-align: right; color: var(--text-sub); }

        @keyframes fadeIn { from{opacity:0} to{opacity:1} }
    </style>
</head>
<body>

    <header>
        <div class="header-group">
            <button class="btn-icon" onclick="toggleMode()" id="modeBtn" title="åˆ‡æ¢æ¨¡å¼">ğŸ“‚</button>
            <button class="btn-icon" onclick="resetProgress()" title="é‡ç½®è¿›åº¦" style="color: var(--color-forget);">â†»</button>
        </div>
        
        <div class="progress-wrapper">
            <div class="progress-text" id="progressText">å·²æŒæ¡ 0 / 100</div>
            <div class="progress-track">
                <div class="progress-fill" id="progressBar"></div>
            </div>
        </div>

        <div class="header-group">
            <button class="btn-icon" onclick="undo()" title="æ’¤é”€ä¸Šä¸€æ­¥">â†©</button>
            <button class="btn-icon" onclick="toggleList()">â˜°</button>
        </div>
    </header>

    <main>
        <div class="finished-state" id="finishScreen">
            <span class="finished-icon">ğŸ‰</span>
            <h2>æ­å–œï¼å…¨éƒ¨å®Œæˆ</h2>
            <p style="color:var(--text-sub)">æ‰€æœ‰å•è¯éƒ½å·²åŠ å…¥â€œè®°ä½â€åˆ—è¡¨ã€‚</p>
            <button class="btn-show" onclick="resetProgress()" style="margin-top:30px; background: var(--accent-blue);">é‡æ–°å¼€å§‹</button>
        </div>

        <div class="card-container" id="card" onclick="flipCard()">
            <div class="card-face">
                <div class="tag-theme" id="cardTheme">ä¸»é¢˜</div>
                <div class="front-kanji" id="cardKanji"></div>
                <div class="click-hint">ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</div>
            </div>
            <div class="card-face card-back">
                <div class="back-kana" id="cardKana"></div>
                
                <div class="info-grid">
                    <div class="info-row">
                        <span class="label">æ„æ€</span>
                        <span class="val" id="cardMeaning"></span>
                    </div>
                    <div class="info-row">
                        <span class="label">è¯æ€§</span>
                        <span class="val" id="cardPos"></span>
                    </div>
                </div>

                <div class="tip-box">
                    <span class="tip-title">ğŸ’¡ è®°å¿†é”¦å›Š</span>
                    <span class="tip-content" id="cardTip"></span>
                </div>
            </div>
        </div>
    </main>

    <div class="controls">
        <button class="btn-show" id="showBtn" onclick="flipCard()">æŸ¥çœ‹ç­”æ¡ˆ</button>
        
        <div class="grade-actions" id="gradeBtns">
            <button class="btn-grade btn-forget" onclick="handleGrade('forget', event)">
                å¿˜è®°<span>(3å¼ å)</span>
            </button>
            <button class="btn-grade btn-blurry" onclick="handleGrade('blurry', event)">
                æ¨¡ç³Š<span>(ç¨å)</span>
            </button>
            <button class="btn-grade btn-remember" onclick="handleGrade('remember', event)">
                è®°ä½<span>(å®Œæˆ)</span>
            </button>
        </div>
    </div>

    <div class="modal" id="listModal">
        <div class="modal-header">
            <h3>å•è¯ä¸€è§ˆ</h3>
            <button class="btn-icon" onclick="toggleList()">Ã—</button>
        </div>
        <div class="word-list" id="wordListContainer"></div>
    </div>

    <script>
        // åŒ…å«åŠ©è®°çš„å®Œæ•´æ•°æ®
        const rawData = `äººé™…ä¸èº«ä»½,ã¡ã‚…ã†ã”ã,ä¸­å›½,å,ä¸­å›½,çš®å¡ä¸˜(Chu)å’Œæ‚Ÿç©º(Goku)éƒ½åœ¨ä¸­å›½ã€‚
äººé™…ä¸èº«ä»½,ã«ã»ã‚“,æ—¥æœ¬,ä¸“,æ—¥æœ¬,æ³¥(Ni)åœŸæ˜¯çº¢(Hon)è‰²çš„æ—¥æœ¬ã€‚
äººé™…ä¸èº«ä»½,ãŒã„ã“ã,å¤–å›½,å,å¤–å›½,è¯¥(Gai)å»å›½å¤–çœ‹çœ‹(Koku)ã€‚
äººé™…ä¸èº«ä»½,ã›ã‹ã„,ä¸–ç•Œ,å,ä¸–ç•Œ,è‰²å½©(Se)æ–‘æ–“çš„ä¸–ç•Œï¼Œå¤§å¼€(Kai)çœ¼ç•Œã€‚
äººé™…ä¸èº«ä»½,ãã«,å›½,å,å›½ï¼Œå›½å®¶,å›½å®¶å»ºè®¾åœ¨è‹¦æ³¥(Kuni)ä¹‹ä¸Šã€‚
äººé™…ä¸èº«ä»½,ã²ã¨,äºº,å,äºº,é‚£ä¸ªäººå›å¤´(Hito)çœ‹æˆ‘ã€‚
äººé™…ä¸èº«ä»½,ãŠã¨ã“,ç”·,å,ç”·,å‚²(O)å¤´(To)éª¨(Ko)æ˜¯ç”·å­æ±‰ã€‚
äººé™…ä¸èº«ä»½,ãŠã‚“ãª,å¥³,å,å¥³,å™¢(O)é‚£(Nna)æ˜¯ç¾å¥³ã€‚
äººé™…ä¸èº«ä»½,ã˜ã‚‡ã›ã„,å¥³æ€§,å,å¥³æ€§,æ•‘ä¸–(Josei)ä¸»æ˜¯å¥³æ€§ã€‚
äººé™…ä¸èº«ä»½,ãŒãã›ã„,å­¦ç”Ÿ,å,ï¼ˆå¤§ï¼‰å­¦ç”Ÿ,æ(Ga)è‹¦æ¶©(Kusei)çš„å­¦ä¹ ã€‚
äººé™…ä¸èº«ä»½,ã›ã‚“ã›ã„,å…ˆç”Ÿ,å,è€å¸ˆ,å…ˆç”Ÿ(Sen)è¯´(Sei)å¾—å¯¹ã€‚
äººé™…ä¸èº«ä»½,ã‹ã„ã—ã‚ƒã„ã‚“,ä¼šç¤¾å“¡,å,å…¬å¸èŒå‘˜,å¼€(Kai)ä¸‹ä¸€(Shai)ä¸ªå—¯(In)é•¿çš„ä¼šã€‚
äººé™…ä¸èº«ä»½,ã¨ã‚‚ã ã¡,å‹é”,å,æœ‹å‹,å·(To)æ‘¸(Mo)æ‰“(Da)èµ·(Chi)æ¥æ˜¯æŸå‹ã€‚
äººé™…ä¸èº«ä»½,ã«ã‚“ã,äººæ°—,å,å£°æœ›ï¼Œå—æ¬¢è¿,äººæ°”å¾ˆé«˜ï¼Œæ‚¨(Nin)å®¢(Ki)æ°”äº†ã€‚
äººé™…ä¸èº«ä»½,ã‚†ã†ã‚ã„,æœ‰å,å½¢2,æœ‰å,å‹(Yuu)ç¾(Mei)å¾ˆæœ‰åã€‚
å®¶åº­æˆå‘˜,ã‹ãã,å®¶æ—,å,å®¶äººï¼Œå®¶å±,é (Ka)æ—(Zoku)äººç”Ÿæ´»ã€‚
å®¶åº­æˆå‘˜,ã‚Šã‚‡ã†ã—ã‚“,ä¸¡è¦ª,å,çˆ¶æ¯ï¼ŒåŒäº²,è‰¯(Ryou)å¿ƒ(Shin)çˆ¶æ¯ã€‚
å®¶åº­æˆå‘˜,ã¡ã¡,çˆ¶,å,ï¼ˆæˆ‘ï¼‰çˆ¶äº²,ä¸ƒä¸ƒ(Chichi)äº‹å˜ï¼Œçˆ¶äº²å‚å†›ã€‚
å®¶åº­æˆå‘˜,ã¯ã¯,æ¯,å,ï¼ˆæˆ‘ï¼‰æ¯äº²,æ¯äº²å“ˆå“ˆ(Haha)å¤§ç¬‘ã€‚
å®¶åº­æˆå‘˜,ãã‚‡ã†ã ã„,å…„å¼Ÿ,å,å…„å¼Ÿå§å¦¹,å·¨å¤§(Kyodai)çš„å…„å¼Ÿæƒ…ã€‚
å®¶åº­æˆå‘˜,ã‚ã«,å…„,å,å“¥å“¥ï¼Œå…„é•¿,é˜¿ä½ (Ani)æ˜¯æˆ‘å“¥ã€‚
å®¶åº­æˆå‘˜,ãŠã¨ã†ã¨,å¼Ÿ,å,å¼Ÿå¼Ÿ,æ¬§(O)é€(Tou)é€(To)çš„å¼Ÿå¼Ÿï¼ˆå¾ˆæœºçµï¼‰ã€‚
å®¶åº­æˆå‘˜,ã„ã‚‚ã†ã¨,å¦¹,å,å¦¹å¦¹,å§¨(I)æŸ(Mou)å·(To)çœ‹å¦¹å¦¹ã€‚
å­¦ä¹ ä¸å·¥ä½œ,ã ã„ãŒã,å¤§å­¦,å,å¤§å­¦,å¾…(Dai)å®¶(Ga)è‹¦(Ku)è¯»è€ƒå¤§å­¦ã€‚
å­¦ä¹ ä¸å·¥ä½œ,ãŒã£ã“ã†,å­¦æ ¡,å,å­¦æ ¡,è¯¥(Ga)è€ƒ(Kou)è¯•äº†å»å­¦æ ¡ã€‚
å­¦ä¹ ä¸å·¥ä½œ,ãã‚‡ã†ã—ã¤,æ•™å®¤,å,æ•™å®¤,æ•™(Kyou)å®¤(Shitsu)é‡Œæœ‰æ•™ä¹ ã€‚
å­¦ä¹ ä¸å·¥ä½œ,ã¹ã‚“ãã‚‡ã†ã—ã¾ã™,å‹‰å¼·ï½,åŠ¨3,å­¦ä¹ ,å˜(Ben)å¼º(Kyou)å°±è¦å­¦ä¹ ã€‚
å­¦ä¹ ä¸å·¥ä½œ,ã—ã‚…ãã ã„,å®¿é¡Œ,å,ä½œä¸š,å®¿(Shuku)é¢˜(Dai)åƒä½å®¿è´¹ä¸€æ ·å¿…äº¤ã€‚
å­¦ä¹ ä¸å·¥ä½œ,ã—ã‘ã‚“,è©¦é¨“,å,è€ƒè¯•,å–œ(Shi)çœ‹(Ken)è€ƒè¯•ç»“æœã€‚
å­¦ä¹ ä¸å·¥ä½œ,ã‚‚ã‚“ã ã„,å•é¡Œ,å,é—®é¢˜,æ²¡(Mon)å‘†(Dai)ä½ï¼Œå‡ºäº†é—®é¢˜ã€‚
å­¦ä¹ ä¸å·¥ä½œ,ã—ã”ã¨,ä»•äº‹,å,å·¥ä½œ,å¸(Shi)è¿‡(Go)å¤´(To)äº†ï¼Œå·¥ä½œå¤ªç´¯ã€‚
å­¦ä¹ ä¸å·¥ä½œ,ã—ã‚…ã£ã¡ã‚‡ã†,å‡ºå¼µ,å,å‡ºå·®,è¾“(Shu)å‡º(Chou)å»å‡ºå·®ã€‚
å­¦ä¹ ä¸å·¥ä½œ,ã˜ã‚…ã†ã—ã‚‡,ä½æ‰€,å,ä½å€,ä½(Juu)æ‰€(Sho) - éŸ³è¯»æ¥è¿‘ã€‚
å­¦ä¹ ä¸å·¥ä½œ,ã˜ã—ã‚‡,è¾æ›¸,å,è¯å…¸,è®°(Ji)æ‰‹(Sho)é‡Œçš„å­—å…¸ã€‚
å­¦ä¹ ä¸å·¥ä½œ,ã‹ã¿,ç´™,å,çº¸,å¡(Ka)å¯†(Mi)å†™åœ¨çº¸ä¸Šã€‚
å­¦ä¹ ä¸å·¥ä½œ,ãˆã„ã”,è‹±è¯­,å,è‹±è¯­,A(Ei) go! è‹±è¯­å†²ï¼
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã¸ã‚„,éƒ¨å±‹,å,æˆ¿é—´ï¼Œå±‹å­,é»‘(He)å‹(Ya)å‹çš„æˆ¿é—´ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã«ã‚,åº­,å,é™¢å­,æ³¥(Ni)å¨ƒ(Wa)åœ¨é™¢å­é‡Œç©ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã‹ã¹,å£,å,å¢™å£,å¡(Ka)å‘—(Be)ï¼Œå¡åœ¨å¢™ç¼é‡Œã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã¾ã©,çª“,å,çª—ï¼Œçª—æˆ·,å¦ˆ(Ma)å¤š(Do)æ¬¡æ“¦çª—æˆ·ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã§ã‚“ã,é›»æ°—,å,ç”µï¼Œç”µåŠ›,ç”µ(Den)æ°”(Ki) - éŸ³è¯»ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ãŠãµã‚,ãŠé¢¨å‘‚,å,æ¾¡å ‚ï¼Œæµ´å®¤,å™¢(O)ä¸(Fu)å•°(Ro)ï¼Œä¸æƒ³æ´—æ¾¡ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã»ã‚“,æœ¬,å,ä¹¦,çº¢(Hon)å®ä¹¦ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã—ã‚“ã¶ã‚“,æ–°è,å,æŠ¥çº¸,æ–°(Shin)é—»(Bun) - éŸ³è¯»ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã–ã£ã—,é›‘èªŒ,å,æ‚å¿—,æ‚(Zas)å¿—(Shi) - éŸ³è¯»ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã¦ãŒã¿,æ‰‹ç´™,å,ä¿¡,æ‰‹(Te)å†™çš„çº¸(Gami)å°±æ˜¯ä¿¡ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ãã£ã¦,åˆ‡æ‰‹,å,é‚®ç¥¨,åˆ‡(Kit)æ‰‹(Te)ï¼ŒæŠŠé‚®ç¥¨åˆ‡ä¸‹æ¥è´´æ‰‹ä¸Šã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã§ã‚“ã‚,é›»è©±,å,ç”µè¯,ç”µ(Den)è¯(Wa) - éŸ³è¯»ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã¨ã‘ã„,æ™‚è¨ˆ,å,é’Ÿï¼Œè¡¨,å·(To)K(Kei)æ—¶é—´çœ‹è¡¨ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã—ã‚ƒã—ã‚“,å†™çœŸ,å,ç…§ç‰‡,å†™(Sha)çœŸ(Shin) - éŸ³è¯»ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã¯ã“,ç®±,å,ç›’å­ï¼Œç®±å­,å“ˆ(Ha)å£(Ko)ï¼Œç®±å­å¼€å£äº†ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ãµã,æœ,å,è¡£æœ,ç¦(Fu)åº“(Ku)ï¼Œè¡£æœæ˜¯ç¦åº“ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ãã¤,é´,å,é‹,è£¤(Ku)å­(Tsu)é…é‹å­ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã•ã„ãµ,è²¡å¸ƒ,å,é’±åŒ…,æ‰(Sai)å¯Œ(Fu)ï¼Œé’±åŒ…é‡Œæœ‰è´¢å¯Œã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ãŠã‹ã­,ãŠé‡‘,å,é’±ï¼Œé‡‘é’±,å™¢(O)å¡(Ka)å†…(Ne)è¡£é‡Œè—é’±ã€‚
ç”Ÿæ´»ä¸éšèº«ç‰©å“,ã«ã‚‚ã¤,è·ç‰©,å,åŒ…è£¹,æ³¥(Ni)è°‹(Mo)åˆº(Tsu)ï¼Œè¡Œæé‡Œè—äº†ä¸œè¥¿ã€‚
é¥®é£Ÿä¸ä¼‘æ¯,ã—ã‚‡ãã©ã†,é£Ÿå ‚,å,é£Ÿå ‚,é£Ÿ(Shoku)å ‚(Dou) - éŸ³è¯»ã€‚
é¥®é£Ÿä¸ä¼‘æ¯,ã‚Šã‚‡ã†ã‚Š,æ–™ç†,å,èœè‚´ï¼Œé¥­èœ,æ–™(Ryou)ç†(Ri) - éŸ³è¯»ã€‚
é¥®é£Ÿä¸ä¼‘æ¯,ã«ã,è‚‰,å,è‚‰,å°¼(Ni)å§‘(Ku)ä¸åƒè‚‰ã€‚
é¥®é£Ÿä¸ä¼‘æ¯,ã‚„ã•ã„,é‡èœ,å,è”¬èœ,å‹(Ya)èœ(Sai)ï¼ŒæŠŠé‡èœå‹å®äº†ã€‚
é¥®é£Ÿä¸ä¼‘æ¯,ã²ã‚‹ã”ã¯ã‚“,æ˜¼ã”é£¯,å,åˆé¥­,æ˜¼(Hiru-ç™½å¤©) + é¥­(Gohan)ã€‚
é¥®é£Ÿä¸ä¼‘æ¯,ãŠã¹ã‚“ã¨ã†,ãŠå¼å½“,å,ç›’é¥­,ä¾¿(Ben)å½“(Tou) - éŸ³è¯»ã€‚
é¥®é£Ÿä¸ä¼‘æ¯,ã¿ãš,æ°´,å,æ°´ï¼Œå‡‰æ°´,èœœ(Mi)æ±(Zu)æ°´ã€‚
é¥®é£Ÿä¸ä¼‘æ¯,ã‚„ã™ã¿,ä¼‘ã¿,å,ä¼‘æ¯,é›…(Ya)æ€(Su)è¿·(Mi)ï¼Œè€ƒå®Œä¼‘æ¯ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ã¾ã¡,ç”º,å,åŸå¸‚ï¼Œè¡—é“,å¦ˆ(Ma)å»(Chi)é€›è¡—ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ãã‚“ã“ã†,éŠ€è¡Œ,å,é“¶è¡Œ,é“¶(Gin)è¡Œ(Kou) - éŸ³è¯»ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ã³ã‚‡ã†ã„ã‚“,ç—…é™¢,å,åŒ»é™¢,ç—…(Byou)é™¢(In) - éŸ³è¯»ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ã“ã†ãˆã‚“,å…¬åœ’,å,å…¬å›­,å…¬(Kou)å›­(En) - éŸ³è¯»ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ãˆã,é§…,å,è½¦ç«™,å”‰(E)æ°”(Ki)ï¼Œè½¦ç«™äººå¤šå¹æ°”ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ãŸã¦ã‚‚ã®,å»ºç‰©,å,å¤§æ¥¼ï¼Œå»ºç­‘ç‰©,ç«™(Ta)æ‰‹(Te)ç‰©(Mono) -> ç«™ç«‹çš„ç‰©ä½“ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ã¯ã—,æ¡¥,å,æ¡¥ï¼Œæ¡¥æ¢,å“ˆ(Ha)å¸(Shi)ï¼Œæ¡¥ä¸Šæ·±å‘¼å¸ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ã°ã—ã‚‡,å ´æ‰€,å,æ‰€åœ¨åœ°ï¼Œåœºæ‰€,éœ¸(Ba)é¦–(Sho)ï¼Œå æ®åœºæ‰€ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ã¿ã¡,é“,å,è·¯ï¼Œé“è·¯,è¿·(Mi)æ°”(Chi)ï¼Œè¿·è·¯äº†ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ã¡ãš,åœ°å›³,å,åœ°å›¾,å»(Chi)æ—(Zu)ï¼Œå¸¦åœ°å›¾å»æ—…æ¸¸ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ãã‚‹ã¾,è»Š,å,è½¦,éª·(Ku)é«…(Ru)é©¬(Ma)ï¼Œå¹½çµè½¦ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ã˜ã¦ã‚“ã—ã‚ƒ,è‡ªè»¢è»Š,å,è‡ªè¡Œè½¦,è‡ª(Ji)è½¬(Ten)è½¦(Sha) - éŸ³è¯»ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ã¡ã‹ã¦ã¤,åœ°ä¸‹é‰„,å,åœ°é“,åœ°(Chi)ä¸‹(Ka)é“(Tetsu) - éŸ³è¯»ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ã§ã‚“ã—ã‚ƒ,é›»è»Š,å,ç”µè½¦,ç”µ(Den)è½¦(Sha) - éŸ³è¯»ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ã²ã“ã†ã,é£›è¡Œæ©Ÿ,å,é£æœº,é£(Hi)è¡Œ(Kou)æœº(Ki) - éŸ³è¯»ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ã‚Šã‚‡ã“ã†,æ—…è¡Œ,å,æ—…è¡Œ,æ—…(Ryo)è¡Œ(Kou) - éŸ³è¯»ã€‚
åŸå¸‚ã€äº¤é€šä¸æ—…æ¸¸,ã•ã‚“ã½ã—ã¾ã™,æ•£æ­©ï½,åŠ¨3,æ•£æ­¥,æ•£(San)æ­¥(Po) - éŸ³è¯»ã€‚
è‡ªç„¶ä¸æ—¶é—´,ã¦ã‚“ã,å¤©æ°—,å,å¤©æ°”,å¤©(Ten)æ°”(Ki) - éŸ³è¯»ã€‚
è‡ªç„¶ä¸æ—¶é—´,ã‚ã‚,é›¨,å,é›¨ï¼Œä¸‹é›¨,é˜¿(A)å¦¹(Me)å–œæ¬¢é›¨ã€‚
è‡ªç„¶ä¸æ—¶é—´,ã‚†ã,é›ª,å,é›ª,æœ‰(Yu)çª(Ki)åœ¨é›ªåœ°ã€‚
è‡ªç„¶ä¸æ—¶é—´,ã†ã¿,æµ·,å,å¤§æµ·,æ±¡(U)è¿·(Mi)ï¼Œå¤§æµ·ä¸æ±¡å¾ˆè¿·äººã€‚
è‡ªç„¶ä¸æ—¶é—´,ã‚„ã¾,å±±,å,å±±,äºš(Ya)é©¬(Ma)é€Šå±±ã€‚
è‡ªç„¶ä¸æ—¶é—´,ã¯ãª,èŠ±,å,èŠ±,å“ˆ(Ha)å¨œ(Na)æ˜¯æœµèŠ±ã€‚
è‡ªç„¶ä¸æ—¶é—´,ã¿ã©ã‚Š,ç·‘,å,ç»¿ï¼Œç»¿è‰²,ç»¿(Mi)å¤š(Do)é‡Œ(Ri)ï¼Œç»¿æ„ç›ç„¶ã€‚
è‡ªç„¶ä¸æ—¶é—´,ãã›ã¤,å­£ç¯€,å,å­£èŠ‚,å­£(Ki)èŠ‚(Setsu) - éŸ³è¯»ã€‚
è‡ªç„¶ä¸æ—¶é—´,ã¯ã‚‹,æ˜¥,å,æ˜¥å¤©ï¼Œæ˜¥å­£,å“ˆ(Ha)è·¯(Ru)ï¼Œæ˜¥å¤©ä¸Šè·¯ã€‚
è‡ªç„¶ä¸æ—¶é—´,ãµã‚†,å†¬,å,å†¬å¤©ï¼Œå†¬å­£,è…(Fu)é±¼(Yu)ï¼Œå†¬å¤©åšå’¸é±¼ã€‚
è‡ªç„¶ä¸æ—¶é—´,ãªã¤ã‚„ã™ã¿,å¤ä¼‘ã¿,å,æš‘å‡,å¤(Natsu) + ä¼‘æ¯(Yasumi)ã€‚
è‡ªç„¶ä¸æ—¶é—´,ã„ã¾,ä»Š,å,ç°åœ¨,å§¨(I)å¦ˆ(Ma)ç°åœ¨æ¥äº†ã€‚
è‡ªç„¶ä¸æ—¶é—´,ã‚ã•,æœ,å,æ—©æ™¨,é˜¿(A)è¨(Sa)å§†å¥¶èŒ¶ï¼Œæ—©æ™¨å–ã€‚
è‡ªç„¶ä¸æ—¶é—´,ã²ã‚‹,æ˜¼,å,ç™½å¤©ï¼Œä¸­åˆ,å–œ(Hi)è·¯(Ru)ï¼Œç™½å¤©èµ¶è·¯ã€‚
è‡ªç„¶ä¸æ—¶é—´,ãã‚‡ã†,ä»Šæ—¥,å,ä»Šå¤©,æŠ (Kyou)é—¨ï¼Œä»Šå¤©ä¸è¯·å®¢ã€‚
è‡ªç„¶ä¸æ—¶é—´,ã¸ã„ã˜ã¤,å¹³æ—¥,å,å¹³æ—¥ï¼Œéä¼‘æ¯æ—¥,å¹³(Hei)æ—¥(Jitsu) - éŸ³è¯»ã€‚
è‡ªç„¶ä¸æ—¶é—´,ã™ã„ã‚ˆã†ã³,æ°´æ›œæ—¥,å,æ˜ŸæœŸä¸‰,æ°´(Sui)æ›œæ—¥ã€‚
è‡ªç„¶ä¸æ—¶é—´,ã‚‚ãã‚ˆã†ã³,æœ¨æ›œæ—¥,å,æ˜ŸæœŸå››,æœ¨(Moku)æ›œæ—¥ã€‚
è‡ªç„¶ä¸æ—¶é—´,ãŸã‚“ã˜ã‚‡ã†ã³,èª•ç”Ÿæ—¥,å,ç”Ÿæ—¥,è¯(Tan)ç”Ÿ(Jou)æ—¥(Bi) - éŸ³è¯»ã€‚
å¥åº·ä¸èº«ä½“,ã‚ãŸã¾,é ­,å,å¤´ï¼Œå¤´è„‘,é˜¿(A)ä»–(Ta)å¦ˆ(Ma)æ‰“å¤´ã€‚
å¥åº·ä¸èº«ä½“,ã‹ãŠ,é¡”,å,è„¸ï¼Œé¢œé¢,é (Kao)ï¼Œçœ‹è„¸ã€‚
å¥åº·ä¸èº«ä½“,ã‚,ç›®,å,çœ¼ï¼Œçœ¼ç›,ç¾(Me)ç›®ã€‚
å¥åº·ä¸èº«ä½“,ã¯ãª,é¼»,å,é¼»ï¼Œé¼»å­,å“ˆ(Ha)å¨œ(Na)é¼»å­æŒºã€‚
å¥åº·ä¸èº«ä½“,ã‹ã¿,é«ª,å,å¤´å‘,å¡(Ka)è¿·(Mi)ï¼Œå¤´å‘è¿·äººã€‚
å¥åº·ä¸èº«ä½“,ã‚ã—,è¶³,å,è„š,é˜¿(A)æ´—(Shi)è„šã€‚
å¥åº·ä¸èº«ä½“,ã‚†ã³,æŒ‡,å,æ‰‹æŒ‡ï¼ŒæŒ‡å¤´,æœ‰(Yu)å¿…(Bi)è¦ç”¨æ‰‹æŒ‡ã€‚
å¥åº·ä¸èº«ä½“,ã‹ãœ,é¢¨é‚ª,å,æ„Ÿå†’,å¡(Ka)åˆ™(Ze)ï¼Œæ„Ÿå†’å—“å­å¡ç€äº†ã€‚
å¥åº·ä¸èº«ä½“,ã­ã¤,ç†±,å,å‘çƒ§ï¼Œä½“æ¸©,çƒ­(Netsu)æ­»(Su)äº†ã€‚
å¥åº·ä¸èº«ä½“,ãã™ã‚Š,è–¬,å,è¯,è‹¦(Ku)æ­»(Su)é‡Œ(Ri)ï¼Œè¯è‹¦æ­»äººã€‚
å¥åº·ä¸èº«ä½“,ãã‚‚ã¡,æ°—æŒã¡,å,å¿ƒæƒ…,æ°”(Ki)æŒ(Mo)å»(Chi)ï¼Œå¿ƒæƒ…ä¿æŒä¸‹å»ã€‚
è¯„ä»·ä¸çŠ¶æ€,ã˜ã‚‡ã†ãš,ä¸Šæ‰‹,å½¢2,æ“…é•¿ï¼Œæ°´å¹³é«˜,ä¸Š(Jou)æ‰‹(Zu) - éŸ³è¯»ã€‚
è¯„ä»·ä¸çŠ¶æ€,ã¸ãŸ,ä¸‹æ‰‹,å½¢2,ä¸é«˜æ˜ï¼Œæ°´å¹³ä½,é»‘(He)å¡”(Ta)ï¼Œç¬¨æ‰‹ç¬¨è„šã€‚
è¯„ä»·ä¸çŠ¶æ€,ã«ãŒã¦,è‹¦æ‰‹,å½¢2,ä¸æ“…é•¿ï¼Œä¸å–„äº,ä½ (Ni)å°¬(Ga)ç‰¹(Te)ï¼Œä½ å°´å°¬ç‰¹åˆ«ä¸è¡Œã€‚
è¯„ä»·ä¸çŠ¶æ€,ã—ã‚“ã›ã¤,è¦ªåˆ‡,å½¢2,çƒ­æƒ…,äº²(Shin)åˆ‡(Setsu) - éŸ³è¯»ã€‚
è¯„ä»·ä¸çŠ¶æ€,ã‹ã‚“ãŸã‚“,ç°¡å˜,å½¢2,ç®€å•,ç®€(Kan)å•(Tan) - éŸ³è¯»ã€‚
è¯„ä»·ä¸çŠ¶æ€,ã ã„ã˜ã‚‡ã†ã¶,å¤§ä¸ˆå¤«,å½¢2,æ²¡å…³ç³»ï¼Œæ”¾å¿ƒ,å¤§(Dai)ä¸ˆ(Jou)å¤«(Bu) - éŸ³è¯»ã€‚
è¯„ä»·ä¸çŠ¶æ€,ãŸã„ã›ã¤,å¤§åˆ‡,å½¢2,é‡è¦ï¼Œçè´µ,å¤ª(Tai)åˆ‡(Setsu)èº«é‡è¦ã€‚
è¯„ä»·ä¸çŠ¶æ€,ã¯ã§,æ´¾æ‰‹,å½¢2,è€€çœ¼ï¼ŒèŠ±å“¨,å“ˆ(Ha)å—²(De)ï¼Œç©¿å¾—å¥½å—²å¥½èŠ±å“¨ã€‚
å¨±ä¹ä¸æ–¹ä½,ãŠã‚“ãŒã,éŸ³æ¥½,å,éŸ³ä¹,éŸ³(On)ä¹(Gaku) - éŸ³è¯»ã€‚
å¨±ä¹ä¸æ–¹ä½,ãˆã„ãŒ,æ˜ ç”»,å,ç”µå½±,A(Ei)å’–(Ga)æ¼”ç”µå½±ã€‚
å¨±ä¹ä¸æ–¹ä½,ã†ãŸ,æ­Œ,å,æ­Œï¼Œæ­Œæ›²,å””(U)è¸(Ta)ï¼Œè¾¹å”±è¾¹è¸æ­¥ã€‚
å¨±ä¹ä¸æ–¹ä½,ã¿ã,å³,å,å³ï¼Œå³è¾¹,ç±³(Mi)å¥‡(Gi)ç”¨å³æ‰‹ã€‚
å¨±ä¹ä¸æ–¹ä½,ã²ã ã‚Š,å·¦,å,å·¦ï¼Œå·¦è¾¹,å¸Œ(Hi)è¾¾(Da)é‡Œ(Ri)ï¼Œå·¦è¾¹åˆ°è¾¾ã€‚
å¨±ä¹ä¸æ–¹ä½,ã‚ˆã“,æ¨ª,å,æ—è¾¹ï¼Œä¾§é¢,ä¼˜(Yo)å£(Ko)ï¼Œä¾§é¢ä¼˜ç¾çš„å£ã€‚
å¨±ä¹ä¸æ–¹ä½,ã›ã„ã‹ã¤,ç”Ÿæ´»,å,ç”Ÿæ´»,ç”Ÿ(Sei)æ´»(Katsu) - éŸ³è¯»ã€‚
åŠ¨ç‰©ä¸è‡ªç„¶,ã­ã“,çŒ«,å,çŒ«,ä¹ƒ(Ne)å£(Ko)ï¼ŒçŒ«å¥¶ä¸€å£ã€‚
åŠ¨ç‰©ä¸è‡ªç„¶,ã„ã¬,çŠ¬,å,ç‹—,å§¨(I)å¥´(Nu)ï¼Œå½“ç‹—å¥´ã€‚`;

        // æ•°æ®è§£æ
        const vocabulary = rawData.trim().split('\n').map((line, index) => {
            const parts = line.split(',');
            if (parts.length >= 6) {
                return {
                    id: index,
                    theme: parts[0],
                    kana: parts[1],
                    kanji: parts[2],
                    pos: parts[3],
                    mean: parts[4],
                    tip: parts[5] 
                };
            }
        }).filter(item => item !== undefined);

        // --- åº”ç”¨çŠ¶æ€ ---
        let studyQueue = [];  
        let masteredCount = 0;
        let totalWords = vocabulary.length;
        let isFlipped = false;
        let isShuffled = false;
        let historyStack = []; 

        const cardEl = document.getElementById('card');
        const showBtn = document.getElementById('showBtn');
        const gradeBtns = document.getElementById('gradeBtns');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const finishScreen = document.getElementById('finishScreen');
        const modeBtn = document.getElementById('modeBtn');

        function init() {
            studyQueue = [...vocabulary];
            masteredCount = 0;
            updateProgress();
            renderCard();
            generateList();
        }

        function renderCard() {
            if (studyQueue.length === 0) {
                cardEl.style.display = 'none';
                document.querySelector('.controls').style.display = 'none';
                finishScreen.style.display = 'block';
                return;
            } else {
                cardEl.style.display = 'block';
                document.querySelector('.controls').style.display = 'flex';
                finishScreen.style.display = 'none';
            }

            const word = studyQueue[0];
            
            isFlipped = false;
            cardEl.classList.remove('flipped');
            showBtn.style.display = 'block';
            gradeBtns.style.display = 'none';

            document.getElementById('cardTheme').textContent = word.theme;
            document.getElementById('cardKanji').textContent = word.kanji;
            
            setTimeout(() => {
                document.getElementById('cardKana').textContent = word.kana;
                document.getElementById('cardMeaning').textContent = word.mean;
                document.getElementById('cardPos').textContent = word.pos;
                document.getElementById('cardTip').textContent = word.tip;
            }, 150);
        }

        function flipCard() {
            if (isFlipped) return;
            isFlipped = true;
            cardEl.classList.add('flipped');
            showBtn.style.display = 'none';
            gradeBtns.style.display = 'flex';
        }

        function handleGrade(grade, event) {
            if (event) event.stopPropagation();
            
            const currentCard = studyQueue.shift();
            historyStack.push({
                card: currentCard,
                grade: grade,
                queueSnapshot: [...studyQueue] 
            });
            if (historyStack.length > 5) historyStack.shift(); 

            if (grade === 'remember') {
                masteredCount++;
            } else if (grade === 'blurry') {
                studyQueue.push(currentCard);
            } else if (grade === 'forget') {
                let insertIndex = Math.min(studyQueue.length, 3);
                studyQueue.splice(insertIndex, 0, currentCard);
            }

            updateProgress();
            renderCard();
        }

        function undo() {
            if (historyStack.length === 0) {
                alert("æ²¡æœ‰å¯æ’¤é”€çš„æ“ä½œ");
                return;
            }
            const lastAction = historyStack.pop();
            
            if (lastAction.grade === 'remember') {
                masteredCount--;
            }
            
            if (lastAction.grade !== 'remember') {
                const card = lastAction.card;
                const idx = studyQueue.indexOf(card);
                if (idx > -1) studyQueue.splice(idx, 1);
            }
            
            studyQueue.unshift(lastAction.card);
            
            updateProgress();
            renderCard();
        }

        function updateProgress() {
            progressText.textContent = `å·²æŒæ¡ ${masteredCount} / ${totalWords}`;
            const percent = (masteredCount / totalWords) * 100;
            progressBar.style.width = `${percent}%`;
        }

        function toggleMode() {
            if(studyQueue.length < 2) return;
            const confirmChange = confirm("åˆ‡æ¢æ¨¡å¼å°†é‡ç½®å½“å‰æœªæŒæ¡å•è¯çš„é¡ºåºï¼Œç¡®å®šå—ï¼Ÿ");
            if (!confirmChange) return;

            isShuffled = !isShuffled;
            modeBtn.textContent = isShuffled ? "ğŸ²" : "ğŸ“‚";
            
            const current = studyQueue.shift();
            if (isShuffled) {
                studyQueue = shuffleArray(studyQueue);
            } else {
                studyQueue.sort((a, b) => a.id - b.id);
            }
            studyQueue.unshift(current);
            renderCard();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // é‡ç½®è¿›åº¦åŠŸèƒ½
        function resetProgress() {
            if(confirm("âš ï¸ ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰è¿›åº¦å¹¶ä»å¤´å¼€å§‹å—ï¼Ÿ")) {
                // é‡ç½®æ‰€æœ‰çŠ¶æ€
                isShuffled = false;
                modeBtn.textContent = "ğŸ“‚";
                historyStack = [];
                init();
            }
        }

        function toggleList() {
            const modal = document.getElementById('listModal');
            modal.style.display = (modal.style.display === 'flex') ? 'none' : 'flex';
        }

        function generateList() {
            const container = document.getElementById('wordListContainer');
            let html = '';
            vocabulary.forEach(word => {
                html += `
                    <div class="list-item">
                        <span class="list-kanji">${word.kanji}</span>
                        <span class="list-kana">${word.kana}</span>
                        <span class="list-mean">${word.mean}</span>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        init();
    </script>
</body>
</html>